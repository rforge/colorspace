---
title: "colorspace: A Toolbox for Manipulating and Assessing Colors and Palettes"
author: "Achim Zeileis, Jason C. Fisher, Kurt Hornik, Ross Ihaka, Claire D. McWhite, Paul Murrell, Reto Stauffer, Claus O. Wilke"
date: 2018-09-20
output:
  html_document:
    toc: true
    toc_float: true
    number_sections: true
    theme: flatly
bibliography: color.bib
vignette: >
  %\VignetteIndexEntry{colorspace: A Toolbox for Manipulating and Assessing Colors and Palettes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteDepends{colorspace,ggplot2}
  %\VignetteKeywords{RGB, sRGB, XYZ, LUV, LAB, HLS, HSV, HCL, qualitative palette, sequential palette, diverging palette, shiny, visualization, color vision deficiency}
  %\VignettePackage{colorspace}
---

```{r echo=FALSE, message=FALSE}
library("colorspace")
library("ggplot2")
theme_set(theme_minimal())
```

## Overview

The _colorspace_ package provides a broad toolbox for selecting individual
colors or color palettes, manipulating these colors, and employing
them in various kinds of visualizations.

At the core of the package there are various utilities for computing with
color spaces (as the name conveys). Thus, the package helps to map various three-dimensional
representations of color to each other. A particularly important
mapping was the one from the perceptually-based and device-independent color model
HCL (Hue-Chroma-Luminance) to standard Red-Green-Blue (sRGB) which is the basis for color
specifications in many systems based on the corresponding hex codes (e.g., in HTML but also
in R). For completeness further standard color models were included as well in the package:
`polarLUV()` (= HCL), `LUV()`, `polarLAB()`, `LAB()`, `XYZ()`, `RGB()`, `sRGB()`, `HLS()`,
`HSV()`.

The HCL space (= polar coordinates in CIELUV) is particularly useful for
specifying individual colors and color palettes as its three axes match those
of the human visual system very well. Therefore, the _colorspace_ package provides
three types of palettes based on the HCL model:

* _Qualitative:_ Designed for coding categorical information, i.e.,
  where no particular ordering of categories is available and every color
  should receive the same perceptual weight. Function: `qualitative_hcl()`.
* _Sequential:_ Designed for coding ordered/numeric information, i.e.,
  where colors go from high to low (or vice versa). Function: `sequential_hcl()`.
* _Diverging:_ Designed for coding numeric information around a central
  neutral value, i.e., where colors diverge from neutral to two extremes.
  Function: `diverging_hcl()`.

To aid choice and application of these palettes there are: scales for use
with _ggplot2_; shiny (and tcltk) apps for interactive exploration;
visualizations of palette properties; accompanying manipulation utilities
(like desaturation, lighten/dark, and emulation of color vision deficiencies).

More detailed overviews and examples are provided in the package vignettes:

* [Color Spaces: S4 Classes and Utilities](color_spaces.html)
* [HCL-Based Color Palettes](hcl_palettes.html)
* [HCL-Based Color Scales for _ggplot2_](ggplot2_color_scales.html)
* [Palette Visualization and Assessment](palette_visualization.html)
* [Apps for Choosing Colors and Palettes Interactively](hclwizard.html)
* [Color Vision Deficiency Emulation](color_vision_deficiency.html)
* [Color Manipulation and Utilities](manipulation_utilities.Rmd)


## Installation

The stable release version of _colorspace_ is hosted on the Comprehensive R Archive Network
(CRAN) at <https://CRAN.R-project.org/package=colorspace> and can be installed via

```{r eval=FALSE}
install.packages("colorspace")
```

The development version of _colorspace_ is hosted on R-Forge at
<https://R-Forge.R-project.org/projects/colorspace/> in a Subversion (SVN) repository.
It can be installed via

```{r eval=FALSE}
install.packages("colorspace", repos = "http://R-Forge.R-project.org")
```

## First steps

```{r message = FALSE, warning = FALSE, fig.align = "left", fig.height = 9, fig.width = 16, dpi = 48, out.width = "100%"}
hcl_palettes(plot = TRUE)
```

```{r message = FALSE, warning = FALSE, fig.align = "left", fig.height = 4, width.width = 6, dpi = 48, out.width = "100%"}
q4 <- qualitative_hcl(4)
plot(log(EuStockMarkets), plot.type = "single", col = q4, lwd = 2)
legend("topleft", colnames(EuStockMarkets), col = q4, lwd = 3, bty = "n")
```

```{r message = FALSE, warning = FALSE, fig.align = "left", fig.height = 4, width.width = 6, dpi = 48, out.width = "100%"}
library("ggplot2")
ggplot(iris, aes(x = Sepal.Length, fill = Species)) +
  geom_density(alpha = 0.6) + scale_fill_discrete_qualitative()
```

```{r message = FALSE, warning = FALSE, fig.align = "left", fig.height = 4, width.width = 6, dpi = 48, out.width = "100%"}
ttnc <- margin.table(Titanic, c(1, 4))[, 2:1]
spineplot(ttnc, col = sequential_hcl(2))
```

```{r message = FALSE, warning = FALSE, fig.align = "left", fig.height = 4, width.width = 6, dpi = 48, out.width = "100%"}
dsamp <- diamonds[sample(nrow(diamonds), 1000), ]
ggplot(dsamp, aes(carat, price, color = cut)) + geom_point() +
  scale_color_discrete_sequential(palette = "Blues 3", nmax = 6, order = 5:1)
```

```{r demoplot-q, fig.show = "hide", fig.width = 4.5, fig.height = 4.5, fig.align = "center", dev = "png", dpi = 48}
demoplot(q4, "scatter")
```

```{r hclplot-q, fig.show = "hide", fig.width = 4.5, fig.height = 4.5, fig.align = "center", dev = "png", dpi = 48}
hclplot(q4)
```

```{r specplot-q, fig.show = "hide", fig.width = 4.5, fig.height = 4.5, fig.align = "center", dev = "png", dpi = 48}
specplot(q4, type = "o")
```

```{r demoplot-s, fig.show = "hide", fig.width = 4.5, fig.height = 4.5, fig.align = "center", dev = "png", dpi = 48}
s9 <- sequential_hcl(9, "Blues 3")
demoplot(s9, "heatmap")
```

```{r hclplot-s, fig.show = "hide", fig.width = 4.5, fig.height = 4.5, fig.align = "center", dev = "png", dpi = 48}
hclplot(s9)
```

```{r specplot-s, fig.show = "hide", fig.width = 4.5, fig.height = 4.5, fig.align = "center", dev = "png", dpi = 48}
specplot(s9, type = "o")
```


| `demoplot()`                                   | `hclplot()`                                  | `specplot()`                                     |
|:----------------------------------------------:|:--------------------------------------------:|:------------------------------------------------:|
| ![](colorspace_files/figure-html/demoplot-q-1.png)  | ![](colorspace_files/figure-html/hclplot-q-1.png) | ![](colorspace_files/figure-html/specplot-q-1.png)    |
| ![](colorspace_files/figure-html/demoplot-s-1.png)  | ![](colorspace_files/figure-html/hclplot-s-1.png) | ![](colorspace_files/figure-html/specplot-s-1.png)    |
