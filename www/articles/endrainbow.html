<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Somewhere over the Rainbow • colorspace</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Somewhere over the Rainbow">
<meta property="og:description" content="colorspace">
<meta property="og:image" content="http://colorspace.R-Forge.R-project.org/logo.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@AchimZeileis">
<meta name="twitter:site" content="@AchimZeileis">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">colorspace</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4-2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/colorspace.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/color_spaces.html">Color Spaces: S4 Classes and Utilities</a>
    </li>
    <li>
      <a href="../articles/hcl_palettes.html">HCL-Based Color Palettes</a>
    </li>
    <li>
      <a href="../articles/ggplot2_color_scales.html">HCL-Based Color Scales for ggplot2</a>
    </li>
    <li>
      <a href="../articles/palette_visualization.html">Palette Visualization and Assessment</a>
    </li>
    <li>
      <a href="../articles/hclwizard.html">Apps for Choosing Colors and Palettes Interactively</a>
    </li>
    <li>
      <a href="../articles/color_vision_deficiency.html">Color Vision Deficiency Emulation</a>
    </li>
    <li>
      <a href="../articles/manipulation_utilities.html">Color Manipulation and Utilities</a>
    </li>
    <li>
      <a href="../articles/approximations.html">Approximating Palettes from Other Packages</a>
    </li>
    <li>
      <a href="../articles/endrainbow.html">Somewhere over the Rainbow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="endrainbow_files/header-attrs-2.3/header-attrs.js"></script><script src="endrainbow_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Somewhere over the Rainbow</h1>
            
      
      
      <div class="hidden name"><code>endrainbow.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The go-to palette in many software packages is - or used to be until rather recently - the so-called rainbow: a palette created by changing the hue in highly-saturated RGB colors. This has been widely recognized as having a number of disadvantages including: abrupt shifts in brightness, misleading for viewers with color vision deficiencies, too flashy to look at for a longer time. See also the article on <a href="color_vision_deficiency.html">color vision deficiencies</a> that compares the base R <code><a href="https://rdrr.io/r/grDevices/palettes.html">rainbow()</a></code> with better HCL-based alternatives using <code><a href="../reference/demoplot.html">demoplot()</a></code>. Here, we provide further rainbow examples taken from actual publications (rather than simplified demos).</p>
<p>For more details on the limitations of the rainbow palette and further pointers see “<a href="http://www.climate-lab-book.ac.uk/2014/end-of-the-rainbow/">The End of the Rainbow</a>” by <span class="citation">Hawkins et al. (<a href="#ref-color:Hawkins+McNeall+Stephenson:2014" role="doc-biblioref">2014</a>)</span>, “<a href="https://vdl.sci.utah.edu/publications/2019_eurovis_implicit-discretization/">Examining Implicit Discretization in Spectral Schemes</a>” by <span class="citation">Quinan et al. (<a href="#ref-color:Quinan+Padilla+CreemRegehr:2019" role="doc-biblioref">2019</a>)</span>, or “<a href="https://dx.doi.org/10.1175/BAMS-D-13-00155.1">Somewhere over the Rainbow: How to Make Effective Use of Colors in Meteorological Visualizations</a>” by <span class="citation">Stauffer et al. (<a href="#ref-color:Stauffer+Mayr+Dabernig:2015" role="doc-biblioref">2015</a>)</span> as well as the <a href="https://twitter.com/hashtag/endrainbow">#endrainbow</a> hashtag on Twitter.</p>
<p>In a nutshell, the (in-)famous RGB rainbow palette is virtually always a poor choice and properly balanced qualitative, sequential, or diverging palettes - such as the <a href="hcl_palettes.html">HCL-based color palettes</a> provided here - are preferable. Despite such alternatives becoming more and more widely available the rainbow palette is unfortunately still widely used. Below we illustrate some wild-caught examples, highlight their problems (e.g., by desaturation to grayscale or by emulating color vision deficiencies), and suggest better alternatives.</p>
</div>
<div id="would-bob-ross-approve" class="section level2">
<h2 class="hasAnchor">
<a href="#would-bob-ross-approve" class="anchor"></a>Would Bob Ross approve?</h2>
<p>When you see a (scientific) data visualization with a rainbow, ask yourself: Would <a href="https://www.bobross.com/">Bob Ross</a> approve of this?</p>
<p><img src="screenshots/bobross.jpg"></p>
<p>Most likely not. In contrast, choosing a HCL-based palette instead will yield less flashy colors that change smoothly…very much in the spirit of <em>The Joy of Painting</em>.</p>
</div>
<div id="heatmap-from-the-grammar-of-graphics" class="section level2">
<h2 class="hasAnchor">
<a href="#heatmap-from-the-grammar-of-graphics" class="anchor"></a>Heatmap from The Grammar of Graphics</h2>
<p>Even in the excellent book <a href="https://www.cs.uic.edu/~wilkinson/TheGrammarOfGraphics/GOG.html">“The Grammar of Graphics”</a> by <span class="citation">Wilkinson (<a href="#ref-color:Wilkinson:2005" role="doc-biblioref">2005</a>)</span>, the rainbow palette is used in one of the first figures, depicting a heatmap of a bivariate kernel density estimate. The figure is shown below on the left and is contrasted with an HCL-based sequential heat color palette on the right (<code><a href="../reference/hcl_palettes.html">sequential_hcl(99, palette = "Heat")</a></code>).</p>
<p><img src="screenshots/bkde-rainbow.png" style="width:49.0%"><img src="screenshots/bkde-heat.png" style="width:49.0%"></p>
<p>The original palette changes back and forth between dark and light colors and hence high- and low-density regions are difficult to tell apart, especially when desaturated to grayscale. In contrast, the heat colors go from light to dark and still work very well in grayscale.</p>
<p><img src="screenshots/bkde-rainbow-gray.png" style="width:49.0%"><img src="screenshots/bkde-heat-gray.png" style="width:49.0%"></p>
<p>Similarly, high- and low-density regions are much harder to distinguish for colorblind viewers in the original rainbow palette compared to the heat colors. Below deuteranope vision is emulated.</p>
<p><img src="screenshots/bkde-rainbow-deutan.png" style="width:49.0%"><img src="screenshots/bkde-heat-deutan.png" style="width:49.0%"></p>
</div>
<div id="map-of-model-deviations" class="section level2">
<h2 class="hasAnchor">
<a href="#map-of-model-deviations" class="anchor"></a>Map of model deviations</h2>
<p>Often a subset of the RGB rainbow palette is used as a “traffic light”, coding “positive” (green) and “negative” (red) deviations from some neutral value (yellow), e.g., forecast errors or other model deviations, correlations, slopes, etc. A typical example is shown below, taken from Figure 5 of <span class="citation">Kneib (<a href="#ref-color:Kneib:2006" role="doc-biblioref">2006</a>)</span>, where deviations from a childhood moratlity model (without spatial effect) for Nigeria are depicted.</p>
<p>The original palette is <code><a href="https://rdrr.io/r/grDevices/palettes.html">rainbow(99, start = 0, end = 1/3)</a></code> (left) and as a better alternative <code><a href="../reference/hcl_palettes.html">diverging_hcl(99, "Purple-Green")</a></code> is used. This avoids the flashy colors and uses light gray as the neutral value, making it easier to look at the display for a longer time. Instead of diverging to red/green the palette diverges to purple/green as this works better for colorblind viewers (see below).</p>
<p><img src="screenshots/nigeria-rainbow.png" style="width:49.0%"><img src="screenshots/nigeria-purplegreen.png" style="width:49.0%"></p>
<p>Emulating protanope vision most of the green-yellow contrasts in the RGB rainbow are collpased, making the plot very misleading while the HCL-based purple/green palette still works very well for colorblind viewers.</p>
<p><img src="screenshots/nigeria-rainbow-protan.png" style="width:49.0%"><img src="screenshots/nigeria-purplegreen-protan.png" style="width:49.0%"></p>
<p>Another important difference between the two palettes is that the HCL-based alternative is completely balanced between the two “arms” of the palette while the rainbow is not. Specifically, the green arm has an almost flat luminance trajectory while the red arm reaches much lower luminances (i.e., darker colors).</p>
<p><img src="screenshots/nigeria-rainbow-spectrum.png" style="width:49.0%"><img src="screenshots/nigeria-purplegreen-spectrum.png" style="width:49.0%"></p>
</div>
<div id="weather-map-precipitation" class="section level2">
<h2 class="hasAnchor">
<a href="#weather-map-precipitation" class="anchor"></a>Weather map: Precipitation</h2>
<p>The shaded weather map below was taken from the web site of the <a href="https://www.noaa.gov/">NOAA</a> (National Oceanic and Atmospheric Administration) and it shows a 5-day accumulated precipitation forecast in the United States during the landfall of Hurricane Sandy in 2012. The original color palette (left) is not a classic rainbow but also combines flashy and highly-saturated colors almost everywhere in the palette. For experienced users of this particular product regions with low (vivid green colors) and high (reddish colors) precipitation amounts can be quickly identified. However, it is hard to grasp the message of the figure as a whole.</p>
<p>As an alternative, a proper multi-hue <code><a href="../reference/hcl_palettes.html">sequential_hcl(13, "Purple-Yellow")</a></code> palette is used on the right. This has smooth gradients and the overall message can be grasped quickly, giving focus to the high-precipitation regions depicted with dark/colorful colors.</p>
<p><img src="screenshots/noaa-orig.png" style="width:49.0%"><img src="screenshots/noaa-purpleyellow.png" style="width:49.0%"></p>
<p>Converting all colors to grayscale brings out even more clearly why the overall picture is so hard to grasp with the original palette: The gradients are discontinuous switching several times between bright and dark. Thus, it is hard to identify the region with the maximum precipitation forecast while this is very natural and straightforward with the HCL-based sequential palette.</p>
<p><img src="screenshots/noaa-orig-desaturate.png" style="width:49.0%"><img src="screenshots/noaa-purpleyellow-desaturate.png" style="width:49.0%"></p>
<p>Emulating deuteranope vision emphasizes the same problems as the desaturated version above but shows even more problems with the original palette.</p>
<p><img src="screenshots/noaa-orig-deutan.png" style="width:49.0%"><img src="screenshots/noaa-purpleyellow-deutan.png" style="width:49.0%"></p>
<p>Showing changes in hue/chroma/luminance across the two palettes also highlights the discontinuity vs. smoothness of the two palettes.</p>
<p><img src="screenshots/noaa-orig-spectrum.png" style="width:49.0%"><img src="screenshots/noaa-purpleyellow-spectrum.png" style="width:49.0%"></p>
</div>
<div id="weather-map-dewpoint-temperature" class="section level2">
<h2 class="hasAnchor">
<a href="#weather-map-dewpoint-temperature" class="anchor"></a>Weather map: Dewpoint temperature</h2>
<p>Another shaded map for communicating a weather forecast is shown below, depicting <a href="https://www.emc.ncep.noaa.gov/mmb/mmbpll/ncepmods_gfspll.arch/Tue/00z/east.3mods.2mtd_animate.html">dewpoint temperature forecasts</a> from a certain FV3 Global Forecast System (GFS) <a href="https://www.emc.ncep.noaa.gov/mmb/mmbpll/ncepmods_gfspll/">product</a>. It also does not use a standard rainbow but a palette of similarly highly-saturated colors from a wide range of hues (left panel).</p>
<p>As in the previous section, the palette is very discontinuous and breaks the values down into separate “classes” or “bands”. For experienced users this may help locating bands with very specific numeric values but leads to an uneven overall picture. In contrast, the <code><a href="../reference/hcl_palettes.html">sequential_hcl(23, "ag_Sunset")</a></code> palette (right panel) shows a smooth gradient, giving somewhat more emphasis to the darker low-temperature regions.</p>
<p><img src="screenshots/fv3gfs-rainbow.png" style="width:49.0%"><img src="screenshots/fv3gfs-sunset.png" style="width:49.0%"></p>
<p>Depicting the hue/chroma/luminance trajectories of both palettes also shows the abrupt changes in the original palette which do not convey a continuous temperature scale. Instead, the HCL-based sunset palette is also built from a wide range of hues but changes hue, chroma, and luminance smoothly.</p>
<p><img src="screenshots/fv3gfs-rainbow-spectrum.png" style="width:49.0%"><img src="screenshots/fv3gfs-sunset-spectrum.png" style="width:49.0%"></p>
<p>Consequently, the figure with the sunset palette also works reasonably well in grayscale or for colorblind viewers while the original palette is rather problematic.</p>
<p><img src="screenshots/fv3gfs-rainbow-gray.png" style="width:49.0%"><img src="screenshots/fv3gfs-sunset-gray.png" style="width:49.0%"></p>
<p><img src="screenshots/fv3gfs-rainbow-deutan.png" style="width:49.0%"><img src="screenshots/fv3gfs-sunset-deutan.png" style="width:49.0%"></p>
</div>
<div id="risk-map-influenza" class="section level2">
<h2 class="hasAnchor">
<a href="#risk-map-influenza" class="anchor"></a>Risk map: Influenza</h2>
<p>The shaded map below was taken from the web site of the <a href="https://influenza.rki.de/">Robert Koch-Institut</a> (Arbeitsgemeinschaft Influenza) and it shows the severity of influenza in Germany in week 8, 2019. The original color palette (left) is the classic rainbow ranging from “normal” (blue) to “strongly increased” (red). As all colors in the palette are very flashy and highly-saturated it is hard to grasp intuitively which areas are most affected by influenza. Also, the least interesting “normal” areas stand out as blue is the darkest color in the palette.</p>
<p>As an alternative, a proper multi-hue <code><a href="../reference/hcl_palettes.html">sequential_hcl(99, "Purple-Yellow")</a></code> palette is used on the right. This has smooth gradients and the overall message can be grasped quickly, giving focus to the high-risk regions depicted with dark/colorful colors. However, the extremely sharp transitions between “normal” and “strongly increased” areas (e.g., in the North and the East) might indicate some overfitting in the underlying smoothing for the map.</p>
<p><img src="screenshots/influenza-rainbow.png" style="width:49.0%"><img src="screenshots/influenza-purpleyellow.png" style="width:49.0%"></p>
<p>Converting all colors to grayscale brings out even more clearly why the overall picture is so hard to grasp with the original palette: The gradients are discontinuous switching several times between bright and dark. Thus, it is hard to identify the high-risk regions while this is more natural and straightforward with the HCL-based sequential palette.</p>
<p><img src="screenshots/influenza-rainbow-gray.png" style="width:49.0%"><img src="screenshots/influenza-purpleyellow-gray.png" style="width:49.0%"></p>
<p>Emulating deuteranope vision emphasizes the same problems as the desaturated version above but shows even more problems with the original palette.</p>
<p><img src="screenshots/influenza-rainbow-deutan.png" style="width:49.0%"><img src="screenshots/influenza-purpleyellow-deutan.png" style="width:49.0%"></p>
<p>Showing changes in hue/chroma/luminance across the two palettes also highlights the discontinuity vs. smoothness of the two palettes.</p>
<p><img src="screenshots/influenza-rainbow-spectrum.png" style="width:49.0%"><img src="screenshots/influenza-purpleyellow-spectrum.png" style="width:49.0%"></p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references hanging-indent">
<div id="ref-color:Hawkins+McNeall+Stephenson:2014">
<p>Hawkins, Ed, Doug McNeall, David Stephenson, Jonny Williams, and Dave Carlson. 2014. “The End of the Rainbow – an Open Letter to the Climate Science Community.” <a href="http://www.climate-lab-book.ac.uk/2014/end-of-the-rainbow/">http://www.climate-lab-book.ac.uk/2014/end-of-the-rainbow/</a>.</p>
</div>
<div id="ref-color:Kneib:2006">
<p>Kneib, Thomas. 2006. “Mixed Model-Based Inference in Geoadditive Hazard Regression for Interval-Censored Survival Times.” <em>Computational Statistics &amp; Data Analysis</em> 51: 777–92. <a href="https://doi.org/10.1016/j.csda.2006.06.019">https://doi.org/10.1016/j.csda.2006.06.019</a>.</p>
</div>
<div id="ref-color:Quinan+Padilla+CreemRegehr:2019">
<p>Quinan, P. S., L. M. Padilla, S. H. Creem-Regehr, and M. Meyer. 2019. “Examining Implicit Discretization in Spectral Schemes.” In <em>Eurographics Conference on Visualization (Eurovis) 2019</em>, edited by M. Gleicher, H. Leitte, and I. Viola, 38:3. John Wiley &amp; Sons. <a href="https://vdl.sci.utah.edu/publications/2019_eurovis_implicit-discretization/">https://vdl.sci.utah.edu/publications/2019_eurovis_implicit-discretization/</a>.</p>
</div>
<div id="ref-color:Stauffer+Mayr+Dabernig:2015">
<p>Stauffer, Reto, Georg J. Mayr, Markus Dabernig, and Achim Zeileis. 2015. “Somewhere over the Rainbow: How to Make Effective Use of Colors in Meteorological Visualizations.” <em>Bulletin of the American Meteorological Society</em> 96 (2): 203–16. <a href="https://doi.org/10.1175/BAMS-D-13-00155.1">https://doi.org/10.1175/BAMS-D-13-00155.1</a>.</p>
</div>
<div id="ref-color:Wilkinson:2005">
<p>Wilkinson, Leland. 2005. <em>The Grammar of Graphics</em>. 2nd ed. Springer-Verlag.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Ross Ihaka, Paul Murrell, Kurt Hornik, Jason C. Fisher, Reto Stauffer, Claus O. Wilke, Claire D. McWhite, Achim Zeileis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
