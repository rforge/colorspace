<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Color Spaces: S4 Classes and Utilities • colorspace</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Color Spaces: S4 Classes and Utilities">
<meta property="og:description" content="">
<meta property="og:image" content="http://colorspace.R-Forge.R-project.org/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">colorspace</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/colorspace.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/color_spaces.html">Color Spaces: S4 Classes and Utilities</a>
    </li>
    <li>
      <a href="../articles/hcl_palettes.html">HCL-Based Color Palettes</a>
    </li>
    <li>
      <a href="../articles/ggplot2_color_scales.html">HCL-Based Color Scales for ggplot2</a>
    </li>
    <li>
      <a href="../articles/palette_visualization.html">Palette Visualization and Assessment</a>
    </li>
    <li>
      <a href="../articles/hclwizard.html">Apps for Choosing Colors and Palettes Interactively</a>
    </li>
    <li>
      <a href="../articles/color_vision_deficiency.html">Color Vision Deficiency Emulation</a>
    </li>
    <li>
      <a href="../articles/manipulation_utilities.html">Color Manipulation and Utilities</a>
    </li>
    <li>
      <a href="../articles/approximations.html">Approximating Palettes from Other Packages</a>
    </li>
    <li>
      <a href="../articles/endrainbow.html">Somewhere over the Rainbow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Color Spaces: S4 Classes and Utilities</h1>
            
      
      
      <div class="hidden name"><code>color_spaces.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>At the core of the <em>colorspace</em> package are various utilities for computing with color spaces <span class="citation">(Wikipedia 2019d)</span>, as the name conveys. Thus, the package helps to map various three-dimensional representations of color to each other <span class="citation">(Ihaka 2003)</span>. A particularly important mapping is the one from the perceptually-based and device-independent color model HCL (Hue-Chroma-Luminance) to standard Red-Green-Blue (sRGB) which is the basis for color specifications in many systems based on the corresponding hex codes <span class="citation">(Wikipedia 2019h)</span>, e.g., in HTML but also in R). For completeness further standard color models are included as well in the package. Their connections are illustrated in the following graph:</p>
<p><img src="color_spaces_files/figure-html/color-spaces-1.png" width="912" style="display: block; margin: auto;"></p>
<p>Color models that are (or try to be) perceptually-based are displayed with circles and models that are not are displayed with rectangles. The corresponding classes and eponymous class constructors in <em>colorspace</em> are:</p>
<ul>
<li>
<code><a href="../reference/RGB.html">RGB()</a></code> for the classic Red-Green-Blue color model, which mixes three primary colors with different intensities to obtain a spectrum of colors. The advantage of this color model is (or was) that it corresponded to how computer and TV screens generated colors, hence it was widely adopted and still is the basis for color specifications in many systems. For example, the hex color codes are employed in HTML but also in R. However, the RGB model also has some important drawbacks: It does not take into account the output device properties, it is not perceptually uniform (a unit step within RGB does not produce a constant perceptual change in color), and it is unintuitive for humans to specify colors (say brown or pink) in this space. <span class="citation">(See Wikipedia 2019f.)</span>
</li>
<li>
<code><a href="../reference/sRGB.html">sRGB()</a></code> addresses the issue of device dependency by adopting a so-called gamma correction. Therefore, the gamma-corrected standard RGB (sRGB), as opposed to the linearized RGB above, is a good model for specifying colors in software and for hardware. But it is still unintuitive for humans to work directly with this color space. Therefore, sRGB is a good place to end up in a color space manipulation but it is not a good place to start. <span class="citation">(See Wikipedia 2019g.)</span>
</li>
<li>
<code><a href="../reference/HSV.html">HSV()</a></code> is a simple transformation of the (s)RGB space that tries to capture the perceptual axes: <em>hue</em> (dominant wavelength, the type of color), <em>saturation</em> (colorfulness), and <em>value</em> (brightness, i.e., light vs. dark). Unfortunately, the three axes in the HSV model are confounded so that, e.g., brightness changes dramaticaly with hue. <span class="citation">(See Wikipedia 2019e.)</span>
</li>
<li>
<code><a href="../reference/HLS.html">HLS()</a></code> (Hue-Lightness-Saturation) is another transformation of (s)RGB that tries to capture the perceptual axes. It does a somewhat better job but the dimensions are still strongly confounded. <span class="citation">(See Wikipedia 2019e.)</span>
</li>
<li>
<code><a href="../reference/XYZ.html">XYZ()</a></code> was established by the CIE (Commission Internationale de l’Eclairage) based on experiments with human subjects. It provides a unique triplet of XYZ values, coding the standard observer’s perception of the color. It is device-independent but it is not perceptually uniform and the XYZ coordinates have no intuitive meaning. <span class="citation">(See Wikipedia 2019a.)</span>
</li>
<li>
<code><a href="../reference/LUV.html">LUV()</a></code> and <code><a href="../reference/LAB.html">LAB()</a></code> were therefore proposed by the CIE as perceptually uniform color spaces where the former is typically preferred for emissive technologies (such as screens and monitors) whereas the latter is usually preferred when working with dyes and pigments. However, the three axes of these two spaces still do not correspond to human perceptual axes. <span class="citation">(See Wikipedia 2019c, 2019b.)</span>
</li>
<li>
<code><a href="../reference/polarLUV.html">polarLUV()</a></code> and <code><a href="../reference/polarLAB.html">polarLAB()</a></code> take polar coordinates in the UV plane and AB plane, respectively. Specifically, the polar coordinates of the LUV model are known as the HCL (Hue-Chroma-Luminance) model. These capture the human perceptual axes very well without confounding effects as in the HSV or HLS approaches. (More details follow below.)</li>
</ul>
<p>All S4 classes for color spaces inherit from a virtual class <code>color</code> which is internally always represented by matrices with three columns (corresponding to the three dimensions).</p>
<p>Note that since the inception of the color space conversion tools within <em>colorspace</em> by <span class="citation">Ihaka (2003)</span> other R tools for this purpose became available. Notably, there is <code><a href="https://www.rdocumentation.org/packages/grDevices/topics/convertColor">grDevices::convertColor()</a></code> in base R <span class="citation">(<span class="sans-serif">R</span> Core Team 2018)</span> as well as <code><a href="https://www.rdocumentation.org/packages/farver/topics/convert_colour">farver::convert_colour()</a></code> <span class="citation">(Pedersen, Nicolae, and François 2018)</span> based on a C++ library. For many basic color conversion purposes the <em>colorspace</em> package and these alternatives are equally suitable. Some details differ, though, and the color conversion tools in <em>colorspace</em> are well-embedded into the remaining functionality of the package and make it self-contained.</p>
</div>
<div id="utilities" class="section level2">
<h2 class="hasAnchor">
<a href="#utilities" class="anchor"></a>Utilities</h2>
<p>Various utilities are available for working with these color spaces:</p>
<ul>
<li>
<code>as()</code> method: Conversions of a <code>color</code> object to the various color spaces, e.g., <code>as(x, "sRGB")</code>.</li>
<li>
<code><a href="../reference/coords.html">coords()</a></code>: Extract the three-dimensional coordinates pertaining to the current color class.</li>
<li>
<code><a href="../reference/hex.html">hex()</a></code>: Convert a color object to sRGB and code in a hex string that can be used within R plotting functions.</li>
<li>
<code><a href="../reference/hex2RGB.html">hex2RGB()</a></code>: Convert a given hex color string to an sRGB color object which can also be coerced to other color spaces.</li>
<li>
<code><a href="../reference/readRGB.html">readRGB()</a></code> and <code><a href="../reference/readhex.html">readhex()</a></code> can read text files into color objects, either from RGB coordinates or hex color strings.</li>
<li>
<code><a href="../reference/writehex.html">writehex()</a></code>: Writes hex color strings to a text file.</li>
<li>
<code><a href="../reference/whitepoint.html">whitepoint()</a></code>: Query and change the so-called white point employed in conversions from CIE XYZ to RGB. Defaults to D65 that has been specified by the CIE to approximate daylight.</li>
</ul>
</div>
<div id="illustration-of-basic-colorspace-functionality" class="section level2">
<h2 class="hasAnchor">
<a href="#illustration-of-basic-colorspace-functionality" class="anchor"></a>Illustration of basic colorspace functionality</h2>
<p>As an example a vector of colors <code>x</code> can be specified in the HCL (or polar LUV) model:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">(x &lt;-<span class="st"> </span><span class="kw"><a href="../reference/polarLUV.html">polarLUV</a></span>(<span class="dt">L =</span> <span class="dv">70</span>, <span class="dt">C =</span> <span class="dv">50</span>, <span class="dt">H =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">120</span>, <span class="dv">240</span>)))</a></code></pre></div>
<pre><code>##       L  C   H
## [1,] 70 50   0
## [2,] 70 50 120
## [3,] 70 50 240</code></pre>
<p>The resulting three colors are pastel red (hue = 0), green (hue = 120), and blue (hue = 240) with moderate chroma and luminance. For display in other systems an sRGB representation might be needed:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">(y &lt;-<span class="st"> </span><span class="kw">as</span>(x, <span class="st">"sRGB"</span>))</a></code></pre></div>
<pre><code>##              R         G         B
## [1,] 0.8931564 0.5853740 0.6465459
## [2,] 0.5266113 0.7224335 0.4590469
## [3,] 0.4907804 0.6911937 0.8673877</code></pre>
<p>The displayed coordinates can also be extracted as numeric matrices by <code><a href="../reference/coords.html">coords(x)</a></code> or <code><a href="../reference/coords.html">coords(y)</a></code>. We can also, for example, coerce from sRGB to HSV:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">as</span>(y, <span class="st">"HSV"</span>)</a></code></pre></div>
<pre><code>##             H         S         V
## [1,] 348.0750 0.3446008 0.8931564
## [2,] 104.6087 0.3645825 0.7224335
## [3,] 208.0707 0.4341857 0.8673877</code></pre>
<p>For display in many systems (including R itself) hex color codes based on the sRGB coordinates can be created:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="../reference/hex.html">hex</a></span>(x)</a></code></pre></div>
<pre><code>## [1] "#E495A5" "#86B875" "#7DB0DD"</code></pre>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-color:Ihaka:2003">
<p>Ihaka, Ross. 2003. “Colour for Presentation Graphics.” In <em>Proceedings of the 3rd International Workshop on Distributed Statistical Computing, Vienna, Austria</em>, edited by Kurt Hornik, Friedrich Leisch, and Achim Zeileis. <a href="http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/" class="uri">http://www.ci.tuwien.ac.at/Conferences/DSC-2003/Proceedings/</a>.</p>
</div>
<div id="ref-color:farver">
<p>Pedersen, Thomas Lin, Berendea Nicolae, and Romain François. 2018. <em><span style="font-style:normal;">Farver</span>: Vectorised Colour Conversion and Comparison</em>. <a href="https://CRAN.R-project.org/package=farver" class="uri">https://CRAN.R-project.org/package=farver</a>.</p>
</div>
<div id="ref-color:R">
<p><span class="sans-serif">R</span> Core Team. 2018. <em><span class="sans-serif">R</span>: A Language and Environment for Statistical Computing</em>. Vienna, Austria: <span class="sans-serif">R</span> Foundation for Statistical Computing. <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
</div>
<div id="ref-color:Wiki+CIEXYZ">
<p>Wikipedia. 2019a. “CIE 1931 Color Space — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/CIE_1931_color_space" class="uri">https://en.wikipedia.org/wiki/CIE_1931_color_space</a>, accessed 2019-01-05.</p>
</div>
<div id="ref-color:Wiki+CIELAB">
<p>———. 2019b. “CIELAB Color Space — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/CIELAB_color_space" class="uri">https://en.wikipedia.org/wiki/CIELAB_color_space</a>, accessed 2019-01-05.</p>
</div>
<div id="ref-color:Wiki+CIELUV">
<p>———. 2019c. “CIELUV — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/CIELUV" class="uri">https://en.wikipedia.org/wiki/CIELUV</a>, accessed 2019-01-05.</p>
</div>
<div id="ref-color:Wiki+Colorspace">
<p>———. 2019d. “Color Space — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/Color_space" class="uri">https://en.wikipedia.org/wiki/Color_space</a>, accessed 2019-03-11.</p>
</div>
<div id="ref-color:Wiki+HSV">
<p>———. 2019e. “HSL and HSV — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/HSL_and_HSV" class="uri">https://en.wikipedia.org/wiki/HSL_and_HSV</a>, accessed 2019-01-05.</p>
</div>
<div id="ref-color:Wiki+RGB">
<p>———. 2019f. “RGB Color Space — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/RGB_color_space" class="uri">https://en.wikipedia.org/wiki/RGB_color_space</a>, accessed 2019-01-05.</p>
</div>
<div id="ref-color:Wiki+sRGB">
<p>———. 2019g. “sRGB — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/sRGB" class="uri">https://en.wikipedia.org/wiki/sRGB</a>, accessed 2019-01-05.</p>
</div>
<div id="ref-color:Wiki+Webcolors">
<p>———. 2019h. “Web Colors — Wikipedia, the Free Encyclopedia.” URL <a href="https://en.wikipedia.org/wiki/Web_colors" class="uri">https://en.wikipedia.org/wiki/Web_colors</a>, accessed 2019-03-11.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#utilities">Utilities</a></li>
      <li><a href="#illustration-of-basic-colorspace-functionality">Illustration of basic colorspace functionality</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ross Ihaka, Paul Murrell, Kurt Hornik, Jason C. Fisher, Reto Stauffer, Claus O. Wilke, Claire D. McWhite, Achim Zeileis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
