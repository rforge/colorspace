<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Color Manipulation and Utilities • colorspace</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Color Manipulation and Utilities">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">colorspace</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/colorspace.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/color_spaces.html">Color Spaces: S4 Classes and Utilities</a>
    </li>
    <li>
      <a href="../articles/hcl_palettes.html">HCL-Based Color Palettes</a>
    </li>
    <li>
      <a href="../articles/ggplot2_color_scales.html">HCL-Based Color Scales for ggplot2</a>
    </li>
    <li>
      <a href="../articles/palette_visualization.html">Palette Visualization and Assessment</a>
    </li>
    <li>
      <a href="../articles/hclwizard.html">Apps for Choosing Colors and Palettes Interactively</a>
    </li>
    <li>
      <a href="../articles/color_vision_deficiency.html">Color Vision Deficiency Emulation</a>
    </li>
    <li>
      <a href="../articles/manipulation_utilities.html">Color Manipulation and Utilities</a>
    </li>
    <li>
      <a href="../articles/approximations.html">Approximating Palettes from Other Packages</a>
    </li>
    <li>
      <a href="../articles/endrainbow.html">Somewhere over the Rainbow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../contact.html">Contact</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Color Manipulation and Utilities</h1>
            
      
      
      <div class="hidden name"><code>manipulation_utilities.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <em>colorspace</em> package provides several color manipulation utilities that are useful for creating, assessing, or transforming color palettes, namely:</p>
<ul>
<li>
<code><a href="../reference/desaturate.html">desaturate()</a></code>: Desaturate colors by chroma removal in HCL space.</li>
<li>
<code><a href="../reference/lighten.html">darken()</a></code> and <code><a href="../reference/lighten.html">lighten()</a></code>: Algorithmically lighten or darken colors in HCL and/or HLS space.</li>
<li>
<code><a href="../reference/max_chroma.html">max_chroma()</a></code>: Compute maximum chroma for given hue and luminance in HCL space.</li>
<li>
<code><a href="../reference/mixcolor.html">mixcolor()</a></code>: Additively mix two colors by computing their convex combination.</li>
</ul>
</div>
<div id="desaturation-in-hcl-space" class="section level2">
<h2 class="hasAnchor">
<a href="#desaturation-in-hcl-space" class="anchor"></a>Desaturation in HCL space</h2>
<p>Desaturation should map a given color to the gray with the same “brightness”. In principle, any perceptually-based color model (HCL, HLS, HSV, …) could be employed for this but HCL works particularly well because its coordinates capture the perceptual properties better than most other color models.</p>
<p>The <code><a href="../reference/desaturate.html">desaturate()</a></code> function converts any given hex color code or named R color to the corresponding HCL coordinates and sets the chroma to zero. Thus, only the luminance matters which captures the “brightness” mentioned above. Finally, the resulting HCL coordinates are transformed back to hex color codes for use in R.</p>
<p>For illustration, a few simple examples are presented below. More examples in the context of palettes for statistical graphics are discussed along with the <a href="color_vision_deficiency.html">color vision deficiency</a> article.</p>
<p>First, <code><a href="../reference/desaturate.html">desaturate()</a></code> is used to desaturate a vector of R color names:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="../reference/desaturate.html">desaturate</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"white"</span>, <span class="st">"orange"</span>, <span class="st">"blue"</span>, <span class="st">"black"</span>))</a></code></pre></div>
<pre><code>## [1] "#FFFFFF" "#B8B8B8" "#4C4C4C" "#000000"</code></pre>
<p>Notice that the hex codes corresponding to three coordinates in sRGB space are always the same, indicating gray colors.</p>
<p>Analogously, hex color codes can also be transformed - in this case RGB rainbow colors from the base R function <code><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow</a></span>(<span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] "#FF0000FF" "#00FF00FF" "#0000FFFF"</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw"><a href="../reference/desaturate.html">desaturate</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow</a></span>(<span class="dv">3</span>))</a></code></pre></div>
<pre><code>## [1] "#7F7F7FFF" "#DCDCDCFF" "#4C4C4CFF"</code></pre>
<p>Already this simple example shows that the three RGB rainbow colors have very different grayscale levels. This can be brought even more clearly when using a full color wheel (of colors with hues in [0, 360] degrees). While the RGB <code><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow()</a></code> is very unbalanced the HCL <code><a href="../reference/rainbow_hcl.html">rainbow_hcl()</a></code> (or also <code><a href="../reference/hcl_palettes.html">qualitative_hcl()</a></code>) is (by design) balanced with respect to luminance.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">wheel &lt;-<span class="st"> </span><span class="cf">function</span>(col, <span class="dt">radius =</span> <span class="dv">1</span>, ...)</a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/pie">pie</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">1</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(col)), <span class="dt">col =</span> col, <span class="dt">radius =</span> radius, ...) </a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/par">par</a></span>(<span class="dt">mar =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="fl">0.5</span>, <span class="dv">4</span>), <span class="dt">mfrow =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">2</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="kw">wheel</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow</a></span>(<span class="dv">8</span>))</a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">wheel</span>(<span class="kw"><a href="../reference/desaturate.html">desaturate</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/grDevices/topics/palettes">rainbow</a></span>(<span class="dv">8</span>)))</a>
<a class="sourceLine" id="cb7-6" title="6"><span class="kw">wheel</span>(<span class="kw"><a href="../reference/rainbow_hcl.html">rainbow_hcl</a></span>(<span class="dv">8</span>))</a>
<a class="sourceLine" id="cb7-7" title="7"><span class="kw">wheel</span>(<span class="kw"><a href="../reference/desaturate.html">desaturate</a></span>(<span class="kw"><a href="../reference/rainbow_hcl.html">rainbow_hcl</a></span>(<span class="dv">8</span>)))</a></code></pre></div>
<p><img src="manipulation_utilities_files/figure-html/desaturate-wheel-1.png" width="576"></p>
</div>
<div id="lighten-or-darken-colors" class="section level2">
<h2 class="hasAnchor">
<a href="#lighten-or-darken-colors" class="anchor"></a>Lighten or darken colors</h2>
<p>In principle, a similar approach for lightening and darkening colors can be employed as for desaturation above. The colors can simply be transformed to HCL space and then the luminance can either be decreased (turning the color darker) or increased (turning it lighter) while preserving the hue and chroma coordinates.</p>
<p>This strategy typically works well for lightening colors, although in some situations the result can be rather colorful. Conversely, when darkening rather light colors with little chroma, this can result in rather gray colors.</p>
<p>In these situations, an alternative might be to apply the analogous strategy in HLS space which is frequently used in HTML style sheets. However, this strategy may also yield colors that are either too gray or too colorful. A compromise that sometimes works well is to adjust the luminance coordinate in HCL space but to take the chroma coordinate corresponding the HLS transformation.</p>
<p>We have found that typically the HCL-based transformation performs best for lightening colors and this is hence the default in <code><a href="../reference/lighten.html">lighten()</a></code>. For darkening colors, the combined strategy often works best and is hence the default in <code><a href="../reference/lighten.html">darken()</a></code>. In either case it is recommended to try the other available strategies in case the default yields unexpected results.</p>
<p>Regardless of the chosen color space, the adjustment of the <code>L</code> component can occur by two methods, relative (the default) and absolute. For example for darkening these either use <code>L - 100 * amount</code> (absolute) or <code>L * (1 - amount)</code> (relative). See <code><a href="../reference/lighten.html">lighten()</a></code> and <code><a href="../reference/lighten.html">darken()</a></code> for more details.</p>
<p>For illustration a qualitative palette (Okabe-Ito) is transformed by two levels of both lightening and darkening, respectively.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">oi &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"#61A9D9"</span>, <span class="st">"#ADD668"</span>, <span class="st">"#E6D152"</span>, <span class="st">"#CE6BAF"</span>, <span class="st">"#797CBA"</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="kw"><a href="../reference/swatchplot.html">swatchplot</a></span>(</a>
<a class="sourceLine" id="cb8-3" title="3">  <span class="st">"-40%"</span> =<span class="st"> </span><span class="kw"><a href="../reference/lighten.html">lighten</a></span>(oi, <span class="fl">0.4</span>),</a>
<a class="sourceLine" id="cb8-4" title="4">  <span class="st">"-20%"</span> =<span class="st"> </span><span class="kw"><a href="../reference/lighten.html">lighten</a></span>(oi, <span class="fl">0.2</span>),</a>
<a class="sourceLine" id="cb8-5" title="5">  <span class="st">"  0%"</span> =<span class="st"> </span>oi,</a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="st">" 20%"</span> =<span class="st">  </span><span class="kw"><a href="../reference/lighten.html">darken</a></span>(oi, <span class="fl">0.2</span>),</a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="st">" 40%"</span> =<span class="st">  </span><span class="kw"><a href="../reference/lighten.html">darken</a></span>(oi, <span class="fl">0.4</span>),</a>
<a class="sourceLine" id="cb8-8" title="8">  <span class="dt">off =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="dv">0</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb8-9" title="9">)</a></code></pre></div>
<p><img src="manipulation_utilities_files/figure-html/lighten-darken-1.png" width="432"></p>
</div>
<div id="maximum-chroma-for-given-hue-and-luminance" class="section level2">
<h2 class="hasAnchor">
<a href="#maximum-chroma-for-given-hue-and-luminance" class="anchor"></a>Maximum chroma for given hue and luminance</h2>
<p>As the possible combinations of chroma and luminance in HCL space depend on hue, it is not obvious which trajectories through HCL space are possible prior to trying a specific HCL coordinate by calling <code><a href="../reference/polarLUV.html">polarLUV()</a></code>. To avoid having to fix up the color upon conversion to RGB <code><a href="../reference/hex.html">hex()</a></code> color codes, the <code><a href="../reference/max_chroma.html">max_chroma()</a></code> function computes (approximately) the maximum chroma possible.</p>
<p>For illustration we show that for given luminance (here: L = 50) the maximum chroma varies substantially with hue:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="../reference/max_chroma.html">max_chroma</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">360</span>, <span class="dt">by =</span> <span class="dv">60</span>), <span class="dv">50</span>)</a></code></pre></div>
<pre><code>## [1] 137.96  59.99  69.06  39.81  65.45 119.54 137.96</code></pre>
<p>Similarly, maximum chroma also varies substantially across luminance values for a given hue (here: H = 120, green):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw"><a href="../reference/max_chroma.html">max_chroma</a></span>(<span class="dv">120</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq</a></span>(<span class="dv">0</span>, <span class="dv">100</span>, <span class="dt">by =</span> <span class="dv">20</span>))</a></code></pre></div>
<pre><code>## [1]   0.00  28.04  55.35  82.79 110.28   0.00</code></pre>
<p>In the plots below more combinations are visualized: In the left panel for maximum chroma across hues given luminance and in the right panel with increasing luminance given hue.</p>
<p><img src="manipulation_utilities_files/figure-html/max-chroma-plot-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="additive-mixing-of-two-colors" class="section level2">
<h2 class="hasAnchor">
<a href="#additive-mixing-of-two-colors" class="anchor"></a>Additive mixing of two colors</h2>
<p>In additive color models like <code><a href="../reference/RGB.html">RGB()</a></code> or <code><a href="../reference/XYZ.html">XYZ()</a></code> it can be useful to combine colors by additive mixing. Below a fully saturated red and green are mixed, yielding a medium brownish yellow.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">R &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RGB.html">RGB</a></span>(<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb13-2" title="2">G &lt;-<span class="st"> </span><span class="kw"><a href="../reference/RGB.html">RGB</a></span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb13-3" title="3">Y &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mixcolor.html">mixcolor</a></span>(<span class="fl">0.5</span>, R, G)</a>
<a class="sourceLine" id="cb13-4" title="4">Y</a></code></pre></div>
<pre><code>##        R   G B
## [1,] 0.5 0.5 0</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/graphics/topics/par">par</a></span>(<span class="dt">mar =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">0</span>, <span class="dv">4</span>))</a>
<a class="sourceLine" id="cb15-2" title="2"><span class="kw"><a href="../reference/swatchplot.html">swatchplot</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="../reference/hex.html">hex</a></span>(R), <span class="kw"><a href="../reference/hex.html">hex</a></span>(Y), <span class="kw"><a href="../reference/hex.html">hex</a></span>(G)))</a></code></pre></div>
<p><img src="manipulation_utilities_files/figure-html/mixcolor-1.png" width="240"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#desaturation-in-hcl-space">Desaturation in HCL space</a></li>
      <li><a href="#lighten-or-darken-colors">Lighten or darken colors</a></li>
      <li><a href="#maximum-chroma-for-given-hue-and-luminance">Maximum chroma for given hue and luminance</a></li>
      <li><a href="#additive-mixing-of-two-colors">Additive mixing of two colors</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Ross Ihaka, Paul Murrell, Kurt Hornik, Jason C. Fisher, Reto Stauffer, Claus O. Wilke, Claire D. McWhite, Achim Zeileis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
